{% load static %}
<script src="{% static 'airbnbclone/lib/jquery-3.2.1.min.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.0/js.cookie.min.js"></script>
<script src="{% static 'airbnbclone/js/utilities.js' %}"></script>

<div>
    <nav class="navbar navbar-expand-lg filter_nav" id="navbars">
    
            <div class="filter_nav_div">
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav mr-auto">
                    <li class="filter">From</li>
                    <input type="date" name="from_date" class="filter" placeholder="From">
                    <li class="filter">To</li>
                    <input type="date" name="to_date" class="filter">
                        <form action="{% url 'airbnbclone:filters' %}" method="POST" class="filter-form">
                                <select class="Guests filter" name="guests" style="height:35px;">
                                <option selected>Guests</option>
                                    <option value="1">1 guest</option>
                                    <option value="2">2 guests</option>
                                    <option value="3">3 guests</option>
                                    <option value="4">4 guests</option>
                                    <option value="5">5 guests</option>
                                    <option value="6">6 guests</option>
                                    <option value="7">7 guests</option>
                                    <option value="8">8 guests</option>
                                    <option value="9">9 guests</option>
                                    <option value="10">10 guests</option>
                                </select>
                            <select class="Hometype filter" name="hometype" style="height:35px;">
                                <option selected>Home Type</option>
                                <option value="Entire Place">Entire Place</option>
                                <option value="Private Room">Private Room</option>
                                <option value="Shared Room">Shared Room</option>
                            </select>
                            <select class="Price filter" name="price" style="height:35px;">
                                <option selected>Price</option>
                                <option value="1">$0 - 50</option>
                                <option value="2">$50 - 100 </option>
                                <option value="3">$100 - 150</option>
                                <option value="4">$150 - 200</option>
                                <option value="5">$200 - 250</option>
                                <option value="6">$250 - 300</option>
                                <option value="7">$300 - 400</option>
                                <option value="8">$400 - 500</option>
                                <option value="9">$500 +</option>
                            </select>
                        </form>
                        <button class="btn apply filter" type="submit">Apply</button>
                </ul>
                <ul class="navbar-nav"></ul>
                </ul>
                </div>
            </div>
        </nav>

</div>

    {% block scripts %}
    <script>
        window.onscroll = function() {myFunctions()};
    var navbars = document.getElementById("navbars");
    var stickys = navbars.offsetTop;
    function myFunctions() {
  if (window.pageYOffset >= stickys) {
    navbars.classList.add("sticky")
  } else {
    navbars.classList.remove("sticky");
  }
}
        $(document).ready(function() {
            $(".apply").click(function(event) {
                event.preventDefault()
                $.ajax({
                    beforeSend: setCsrfToken,
                    type: "POST",
                    url: $(".filter-form").attr("action"),
                    data: {
                    'fromDate' : $("input[name=from_date]").val(),
                    'toDate' : $("input[name=to_date]").val(),
                    'guests' : $("select[name=guests]").val(),
                    'homeType' : $("select[name=hometype]").val(),
                    'price' : $("select[name=price]").val()
                    },
                    success: function (response) {
                        
                    }
                });
            });
        });
    
    </script>
    {% endblock %}
    